/*! grafana - v3.0.0-pre1 - 2016-02-22
 * Copyright (c) 2016 Torkel Ã–degaard; Licensed Apache-2.0 */

System.register(["angular","lodash"],function(a){var b,c,d;return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(){function a(a,b){var d=this;this.backendSrv=a,this.$routeParams=b,this.appModel={},this.appId=b.appId,this.backendSrv.get("/api/org/apps/"+this.appId+"/settings").then(function(a){d.appModel=a,d.includedPanels=c["default"].where(a.includes,{type:"panel"}),d.includedDatasources=c["default"].where(a.includes,{type:"datasource"})})}return a.$inject=["backendSrv","$routeParams"],a.prototype.update=function(){var a=c["default"].extend({appId:this.appModel.appId,orgId:this.appModel.orgId,enabled:this.appModel.enabled,pinned:this.appModel.pinned,jsonData:this.appModel.jsonData,secureJsonData:this.appModel.secureJsonData},{});this.backendSrv.post("/api/org/apps/"+this.appId+"/settings",a).then(function(){window.location.href=window.location.href})},a.prototype.toggleEnabled=function(){this.update()},a.prototype.togglePinned=function(){this.update()},a}(),a("AppEditCtrl",d),b["default"].module("grafana.controllers").controller("AppEditCtrl",d)}}});